{"version":3,"sources":["../../scripts/main.ts","../../scripts/stainedGlassWindow.ts","../../scripts/input.ts","../../scripts/output.ts","../../scripts/wand.ts","../../scripts/cuisenaireRods.ts","../../scripts/perfectRun.ts","../../scripts/playerFacing.ts","../../scripts/potionGame.ts","../../scripts/npcscriptEventHandler.ts","../../scripts/gate.ts","../../scripts/npcWalk.ts","../../scripts/resetGame.ts"],"sourcesContent":["import {\n  world,\n  system,\n  Player,\n  BlockPermutation,\n  Block,\n  Entity,\n  Scoreboard,\n  EntityInventoryComponent,\n} from \"@minecraft/server\";\nimport { windowUndoHandler, windowScaleHandler, startWindowGame } from \"./stainedGlassWindow\";\nimport {\n  cuisenaire,\n  getBlockBehind,\n  resetGrid,\n  giveRods,\n  resetNPC,\n  directionCheck,\n  startCuisenaireGame,\n} from \"./cuisenaireRods\";\nimport { cycleNumberBlock } from \"./output\";\nimport { facing } from \"./playerFacing\";\nimport { potionMaker, displayTimer, getSlots, giveIngredients, startPotionGame } from \"./potionGame\";\nimport { giveWand } from \"./wand\";\nimport \"./npcscriptEventHandler\"; //handles the NPC script events\nimport { isCoordinateWithinRange } from \"./input\";\n\nlet overworld = world.getDimension(\"overworld\");\nlet potion: string = \"\";\nlet seconds: number = 0;\nlet potionStart = 0;\nlet potionDrank = false;\nlet meters = 0;\nlet playerCanSeeInDark = false;\n\n//coin\n\nworld.afterEvents.entityHitEntity.subscribe(async (event) => {\n  let hitEntity = event.hitEntity;\n  if (hitEntity.typeId === `blockbuilders:coin`) {\n    let tag = hitEntity.getTags();\n    let x_location = 0 - parseInt(tag[0].substring(4));\n    overworld.runCommandAsync(`scoreboard players add Coins Depth 1`);\n    overworld.runCommandAsync(`tp @e[type=blockbuilders:coin,tag=${tag}] ${x_location} 104 156 facing -11 104 156`);\n  }\n  if (hitEntity.typeId === `blockbuilders:cauldron`) {\n    let cauldron = hitEntity.getComponent(\"inventory\") as EntityInventoryComponent;\n    let slots = await getSlots(cauldron);\n    cauldron.container?.clearAll(); //empties the cauldron\n    ({ potion, seconds } = await potionMaker(slots)); //gets the potion and the seconds for the applyPotionEffect function.\n  }\n});\n\n//listens for the block place event.\nworld.afterEvents.playerPlaceBlock.subscribe(async (event) => {\n  let block = event.block;\n  let player = event.player;\n  let colour = block.permutation?.getState(\"color\");\n  if (colour) {\n    //is it a rod block?\n    if (block.location.y === 95) {\n      //is it placed on the grid?\n      let viewDirection = event.player.getViewDirection();\n      let { direction, oppositeDirection } = await facing(viewDirection);\n      let correctDirection = await directionCheck(block.location.x, block.location.z, direction);\n      let hasColour = await getBlockBehind(event, oppositeDirection);\n      const rodPermutations = {\n        red: { block: \"red_concrete\", value: 2, message: \"1/12\" },\n        lime: { block: \"lime_concrete\", value: 3, message: \"1/8\" },\n        purple: { block: \"purple_concrete\", value: 4, message: \"1/6\" },\n        green: { block: \"green_concrete\", value: 6, message: \"1/4\" },\n        brown: { block: \"brown_concrete\", value: 8, message: \"1/3\" },\n        yellow: { block: \"yellow_concrete\", value: 12, message: \"1/2\" },\n        blue: { block: \"blue_concrete\", value: 24, message: \"1/1\" },\n      };\n      if (!hasColour) {\n        player.runCommandAsync(`title ${player.name} actionbar Place the rod in front of the magical connector.`);\n        event.block.setPermutation(BlockPermutation.resolve(\"tallgrass\"));\n        return;\n      }\n      if (!correctDirection) {\n        player.runCommandAsync(`title ${player.name} actionbar You're facing the wrong way.`);\n        event.block.setPermutation(BlockPermutation.resolve(\"tallgrass\"));\n        return;\n      }\n      const rod = rodPermutations[colour as keyof typeof rodPermutations];\n      if (rod) {\n        cuisenaire(block, rod.block, rod.value, rod.message, direction);\n      }\n    }\n  }\n});\n\n//left click after break\nworld.afterEvents.playerBreakBlock.subscribe(async (clickEvent) => {\n  let hand_item = clickEvent.itemStackAfterBreak?.typeId; //gets the item in the players hand\n  let block = clickEvent.block;\n  let brokenBlock = clickEvent.brokenBlockPermutation;\n  if (hand_item === \"blockbuilders:mathmogicians_wand\") {\n    if (brokenBlock.matches(\"blockbuilders:symbol_subtract\") && block.location.z === 225) {\n      // if it is the window vinculum run the undo function.\n      await windowUndoHandler(block.location);\n      block.setPermutation(BlockPermutation.resolve(\"blockbuilders:symbol_subtract\"));\n    } else if (\n      (block.location.x === 71 && block.location.y === 98 && block.location.z === 225) ||\n      (block.location.x === 82 && block.location.y === 98 && block.location.z === 225)\n    ) {\n      // if it is the window numerator cycle the number.\n      cycleNumberBlock(clickEvent);\n    } else {\n      //if it is anything else replace the block.\n      block.setPermutation(brokenBlock);\n    }\n  }\n});\n\n//right click\nworld.beforeEvents.itemUseOn.subscribe(async (event) => {\n  let block = event.block;\n  if (block.permutation?.matches(\"blockbuilders:symbol_subtract\")) {\n    await windowScaleHandler(block.location);\n  }\n});\n\n//well\nfunction applyPotionEffect(player: any, potion: string, seconds: number) {\n  player.runCommand(\"scoreboard objectives setdisplay sidebar Depth\");\n  let tick = seconds * 20; //converts seconds to ticks\n  potionStart = system.currentTick;\n  switch (potion) {\n    case \"water_breathing\": {\n      player.addEffect(\"water_breathing\", tick);\n      break;\n    }\n    case \"night_vision\": {\n      playerCanSeeInDark = true;\n      player.addEffect(\"night_vision\", tick);\n      break;\n    }\n    case \"blindness\": {\n      player.addEffect(\"blindness\", tick);\n      break;\n    }\n    case \"poison\": {\n      player.addEffect(\"poison\", tick);\n      break;\n    }\n    case \"levitation\": {\n      player.addEffect(\"levitation\", tick);\n      break;\n    }\n  }\n  player.runCommand(\"clear @p minecraft:glass_bottle\");\n}\n\nfunction mainTick() {\n  world.getAllPlayers().forEach(async (player) => {\n    if (player.isJumping == true) {\n      if (await isCoordinateWithinRange(player.location, { x: 18, y: 96, z: 105 }, { x: 118, y: 100, z: 80 })) {\n        let location = player.location;\n        player.runCommandAsync(`dialogue open @e[tag=groundskeeper] ${player.name} groundskeeper1`);\n        player.teleport(location);\n      }\n    }\n    if (player.isInWater) {\n      player.runCommand(`scoreboard objectives setdisplay sidebar Depth`);\n      meters = 94 - Math.floor(player.location.y);\n      player.runCommand(`scoreboard players set Meters Depth ${meters}`);\n\n      if (potionDrank) {\n        //applies the potion effect once\n        applyPotionEffect(player, potion, seconds);\n        potionDrank = false;\n      }\n      if (player.getEffect(\"water_breathing\")) {\n        if (playerCanSeeInDark) {\n          overworld.runCommandAsync(`effect @p night_vision ${seconds} 1 true`);\n        }\n        displayTimer(potionStart, seconds, player, \"Breathing underwater\");\n      } else if (player.getEffect(\"night_vision\")) {\n        //if they currently can't see in the dark.\n        overworld.runCommandAsync(`title @p actionbar You can now permanently see in the dark!`);\n      } else if (player.getEffect(\"blindness\")) {\n        displayTimer(potionStart, seconds, player, \"Oh no! The ratios were wrong, you can't see anything for\");\n      } else if (player.getEffect(\"levitation\")) {\n        displayTimer(potionStart, seconds, player, \"Oh no! You're floating for\");\n      }\n      if (player.isSneaking == true) {\n        player.runCommandAsync(`dialogue open @e[tag=ratioNpc] @p ratioNpc5`);\n        surface(player);\n      }\n      if (player.isSwimming == true) {\n        player.runCommandAsync(`dialogue open @e[tag=ratioNpc] @p ratioNpc5`);\n        surface(player);\n      }\n    }\n  });\n  system.run(mainTick);\n}\nasync function surface(player: any) {\n  player.runCommandAsync(`scoreboard objectives setdisplay sidebar`);\n  player.teleport({ x: -3, y: 96, z: 144 });\n  player.runCommandAsync(`scoreboard objectives setdisplay sidebar`);\n  player.addEffect(\"instant_health\", 5);\n  player.removeEffect(\"blindness\");\n  player.removeEffect(\"night_vision\");\n  player.removeEffect(\"water_breathing\");\n  player.removeEffect(\"levitation\");\n}\n\n//listens for the potion to be fully drunk.\nworld.afterEvents.itemCompleteUse.subscribe(async (event) => {\n  let player = event.source;\n  if (event.itemStack?.typeId === \"minecraft:potion\") {\n    if (potion === \"poison\") {\n      player.runCommandAsync(\n        \"title @p actionbar §fYou mixed the potion with the §2wrong ingredients. \\n§fIt has had no effect.\\nMake sure you're using the correct ingredients.\"\n      );\n    } else {\n      potionDrank = true;\n      player.runCommandAsync(\"title @p actionbar You drank the potion! §2Jump in the well §fto see the effect.\");\n    }\n    event.source.runCommand(\"clear @p minecraft:glass_bottle\");\n  }\n});\n\n//listens for the entity health changed event so they don't drown.\nworld.afterEvents.entityHealthChanged.subscribe(async (event) => {\n  if (event.entity.typeId === \"minecraft:player\") {\n    let player: Player = event.entity as Player;\n\n    if (player.isInWater == true) {\n      if (event.newValue === 18) {\n        //this is the moment they start to take damage in the water.\n        await surface(player);\n        player.runCommandAsync(\"scoreboard objectives setdisplay sidebar\");\n        if (meters > 0) {\n          player.sendMessage(`§fYou made it to a depth of: §2${meters}m \\n§fOnly ${20 - meters}m to the bottom. `);\n        }\n      }\n    }\n  }\n});\n\nsystem.run(mainTick);\n","import { world } from \"@minecraft/server\";\nimport { getCube } from \"./input\";\nimport { setBlock } from \"./output\";\nimport { getInput } from \"./input\";\nimport { Vector3 } from \"@minecraft/server\";\nimport { giveWand } from \"./wand\";\n\nlet overworld = world.getDimension(\"overworld\");\n\nconst windows = [\n  {\n    pos1: { x: 68, y: 97, z: 226 },\n    pos2: { x: 68, y: 101, z: 226 },\n    numerator: { x: 71, y: 98, z: 225 },\n    cloneFrom: { x: 67, y: 47, z: 218 },\n    cloneTo: { x: 76, y: 82, z: 218 },\n    cloneInto: { x: 67, y: 97, z: 218 },\n    scaledLeftCorner: { x: 69, y: 99, z: 218 }, //Bottom left corner of the scaled window.\n  },\n  {\n    pos1: { x: 77, y: 97, z: 227 },\n    pos2: { x: 77, y: 100, z: 224 },\n    numerator: { x: 82, y: 98, z: 225 },\n    cloneFrom: { x: 75, y: 47, z: 218 },\n    cloneTo: { x: 107, y: 66, z: 218 },\n    cloneInto: { x: 75, y: 97, z: 218 },\n    scaledLeftCorner: { x: 78, y: 99, z: 218 }, //Bottom left corner of the scaled window.\n  },\n];\nexport async function resetWindowGame() {\n  for (const window of windows) {\n    overworld.runCommandAsync(\n      `setblock ${window.numerator.x} ${window.numerator.y} ${window.numerator.z} blockbuilders:number_0`\n    );\n    let colours = [\"yellow\", \"green\", \"blue\", \"purple\", \"red\", \"lime\", \"black\", \"brown\"];\n    for (const colour in colours) {\n      overworld.runCommandAsync(\n        `fill ${window.pos1.x} ${window.pos1.y} ${window.pos1.z} ${window.pos2.x} ${window.pos2.y} ${window.pos2.z} air replace ${colours[colour]}_stained_glass`\n      );\n    }\n    windowUndo(window.cloneTo, window.cloneFrom, window.cloneInto);\n  }\n}\n\nexport async function startWindowGame() {\n  overworld.runCommandAsync(`clear @p`);\n  await giveWand();\n  giveGlass();\n}\nexport async function windowScaleHandler(location: Vector3) {\n  const windowIndex = windows.findIndex(\n    (window) =>\n      window.numerator.x === location.x && window.numerator.y === location.y + 1 && window.numerator.z === location.z\n  );\n  if (windowIndex !== -1) {\n    const window = windows[windowIndex]; //gets the correct window.\n    await windowUndo(window.cloneTo, window.cloneFrom, window.cloneInto);\n    scale(window.pos1, window.pos2, window.numerator, window.scaledLeftCorner);\n  }\n}\n\nexport async function windowUndoHandler(location: Vector3) {\n  giveGlass();\n  switch (true) {\n    case location.x === 71 && location.y === 97 && location.z === 225: {\n      await windowUndo({ x: 67, y: 47, z: 218 }, { x: 76, y: 82, z: 218 }, { x: 67, y: 97, z: 218 });\n      break;\n    }\n    case location.x === 82 && location.y === 97 && location.z === 225: {\n      await windowUndo({ x: 75, y: 47, z: 218 }, { x: 107, y: 66, z: 218 }, { x: 75, y: 97, z: 218 });\n      break;\n    }\n  }\n}\n\nexport function giveGlass() {\n  overworld.runCommand(\"replaceitem entity @p slot.hotbar 1 yellow_stained_glass 10\");\n  overworld.runCommand(\"replaceitem entity @p slot.hotbar 2 green_stained_glass 10\");\n  overworld.runCommand(\"replaceitem entity @p slot.hotbar 3 blue_stained_glass 10\");\n  overworld.runCommand(\"replaceitem entity @p slot.hotbar 4 purple_stained_glass 10\");\n  overworld.runCommand(\"replaceitem entity @p slot.hotbar 5 red_stained_glass 10\");\n  overworld.runCommand(\"replaceitem entity @p slot.hotbar 6 lime_stained_glass 10\");\n  overworld.runCommand(\"replaceitem entity @p slot.hotbar 7 black_stained_glass 10\");\n  overworld.runCommand(\"replaceitem entity @p slot.hotbar 8 brown_stained_glass 10\");\n}\n\nexport async function scale(cubePos1: Vector3, cubePos2: Vector3, inputNumber: Vector3, scaledLeftCorner: Vector3) {\n  //if it doesn't work make sure pos1 is the bottom left corner and pos2 is the top right corner\n  const blocks = await getCube(cubePos1, cubePos2);\n  let shape = [];\n  let scaleFactor = getInput([inputNumber]);\n  for (const block of blocks) {\n    let colour = block.permutation?.getState(`color`);\n    if (colour) {\n      if (block.block) {\n        let offset_x = block.block.x - cubePos1.x; //x axis shouldn't change\n        let offset_y = block.block.y - cubePos1.y; // cube pos will always be larger than block pos\n        let offset_z = cubePos1.z - block.block.z; // cube pos will always be smaller than block pos\n        let finalWindow_x = scaledLeftCorner.x + offset_z; //swapped x and z around\n        let finalWindow_y = scaledLeftCorner.y + offset_y;\n        let finalWindow_z = scaledLeftCorner.z + offset_x;\n        let location = { x: finalWindow_x, y: finalWindow_y, z: finalWindow_z, colour: colour };\n        shape.push(location);\n      }\n    }\n  }\n  let scaledShape = await scaleShape(shape, scaleFactor, \"yx\");\n\n  for (const block of scaledShape) {\n    setBlock({ x: block.x, y: block.y, z: block.z }, block.colour + \"_stained_glass\");\n  }\n}\n\nexport async function windowUndo(from: Vector3, to: Vector3, into: Vector3) {\n  await overworld.runCommandAsync(\n    `clone ${from.x} ${from.y} ${from.z} ${to.x} ${to.y} ${to.z} ${into.x} ${into.y} ${into.z} replace`\n  ); //clones from below.\n  await overworld.runCommandAsync(`fill ${from.x} 116 ${from.z} ${to.x} 120 ${to.z} air replace`);\n  await overworld.runCommandAsync(`fill ${from.x} 120 ${from.z} ${to.x} 150 ${to.z} air replace`); //cleans any extra above\n  //cleans any extra above\n}\n\nexport async function scaleShape(shape: any, scaleFactor: any, axes: string) {\n  const scaledShape = [];\n  // Find the minimum coordinates to use as the base point of the shape\n  const basePoint = shape.reduce(\n    (min: any, block: any) => ({\n      x: Math.min(min.x, block.x),\n      y: Math.min(min.y, block.y),\n      z: Math.min(min.z, block.z),\n    }),\n    shape[0]\n  );\n\n  for (const block of shape) {\n    // Calculate the relative position of the block within the shape\n    const relativePos = {\n      x: block.x - basePoint.x,\n      y: block.y - basePoint.y,\n      z: block.z - basePoint.z,\n    };\n\n    // Scale the relative position\n    for (let i = axes.includes(\"x\") ? 0 : scaleFactor - 1; i < scaleFactor; i++) {\n      for (let j = axes.includes(\"y\") ? 0 : scaleFactor - 1; j < scaleFactor; j++) {\n        for (let k = axes.includes(\"z\") ? 0 : scaleFactor - 1; k < scaleFactor; k++) {\n          // Add the scaled relative position to the base point\n          const scaledBlock = {\n            x: basePoint.x + (axes.includes(\"x\") ? relativePos.x * scaleFactor + i : relativePos.x),\n            y: basePoint.y + (axes.includes(\"y\") ? relativePos.y * scaleFactor + j : relativePos.y),\n            z: basePoint.z + (axes.includes(\"z\") ? relativePos.z * scaleFactor + k : relativePos.z),\n            colour: block.colour,\n          };\n          scaledShape.push(scaledBlock);\n        }\n      }\n    }\n  }\n  return scaledShape;\n}\n","import { BlockPermutation, Vector3, world } from \"@minecraft/server\";\n\nlet overworld = world.getDimension(\"overworld\");\n\n//combines multiple digits into a single number\nexport function getInput(digits: Vector3[]): number {\n  let combinedString = \"\";\n  for (let digit of digits) {\n    let digitValue = getNumberValue(digit);\n    combinedString += digitValue;\n  }\n  let combinedNumber = parseInt(combinedString);\n  return combinedNumber;\n}\n\nexport async function isCoordinateWithinRange(toTest: Vector3, pos1: Vector3, pos2: Vector3): Promise<boolean> {\n  const minX = Math.min(pos1.x, pos2.x);\n  const maxX = Math.max(pos1.x, pos2.x);\n  const minY = Math.min(pos1.y, pos2.y);\n  const maxY = Math.max(pos1.y, pos2.y);\n  const minZ = Math.min(pos1.z, pos2.z);\n  const maxZ = Math.max(pos1.z, pos2.z);\n  return (\n    toTest.x >= minX && toTest.x <= maxX && toTest.y >= minY && toTest.y <= maxY && toTest.z >= minZ && toTest.z <= maxZ\n  );\n}\n//gets the block and permutation of a cuboid selection\n//if it doesn't work make sure pos1 is the bottom left corner and pos2 is the top right corner\nexport async function getCube(pos1: Vector3, pos2: Vector3) {\n  const blocks = [];\n\n  for (let x = Math.min(pos1.x, pos2.x); x <= Math.max(pos1.x, pos2.x); x++) {\n    for (let y = Math.min(pos1.y, pos2.y); y <= Math.max(pos1.y, pos2.y); y++) {\n      for (let z = Math.min(pos1.z, pos2.z); z <= Math.max(pos1.z, pos2.z); z++) {\n        const location = { x: x, y: y, z: z };\n        const blockValue = getBlockValue(location);\n        blocks.push(blockValue);\n      }\n    }\n  }\n\n  return blocks;\n}\n//converts a block to a number value\nfunction getNumberValue(location: Vector3) {\n  let { block, permutation } = getBlockValue(location);\n  for (let i = 0; i < 10; i++) {\n    //check for element_0 to element_9\n    if (permutation?.matches(\"blockbuilders:number_\" + i)) {\n      return i;\n    }\n  }\n  block?.setPermutation(BlockPermutation.resolve(\"blockbuilders:number_0\")); //if no match is found, default to element_0\n  return 0; //if no match is found, return 0\n}\n\n//gets the block and permutation of a block at a specific location\nexport function getBlockValue(location: Vector3) {\n  const block = overworld.getBlock(location); //get the block at the location\n  const permutation = block?.permutation; //get the permutation of the block\n  return { block, permutation };\n}\n\n//gets the block and permutation of a block at a specific location\nexport async function getAsyncBlockValue(location: Vector3) {\n  const block = overworld.getBlock(location); //get the block at the location\n  const permutation = block?.permutation; //get the permutation of the block\n  return { block, permutation };\n}\n","import { BlockPermutation, Vector3, world } from \"@minecraft/server\";\nimport { getBlockValue } from \"./input\";\n\nconst overworld = world.getDimension(\"overworld\");\n//outputs the total to the screen\nexport function outputTotal(total: number, location: Vector3) {\n  let blockName = \"\";\n  let totalString = (\"\" + total).split(\"\").reverse().join(\"\"); //reverses the string so it can be read from right to left\n  for (let i = 0; i < totalString.length; i++) {\n    let { block, permutation } = getBlockValue(location);\n    if (totalString[i] === \".\") {\n      blockName = \"blockbuilders:symbol_decimalpoint\";\n    } else {\n      let digit = parseInt(totalString[i]);\n      blockName = \"blockbuilders:number_\" + digit;\n    }\n    block?.setPermutation(BlockPermutation.resolve(blockName));\n    location.x -= 1;\n  }\n}\n\nexport function setBlock(location: Vector3, blockName: string) {\n  let { block } = getBlockValue(location);\n  let isCopper = block?.permutation?.matches(\"waxed_weathered_copper\");\n  if (!isCopper) {\n    //keeps the frame.\n    block?.setPermutation(BlockPermutation.resolve(blockName));\n  }\n}\n\nexport async function clearAnswer(start: Vector3, end: Vector3) {\n  overworld.runCommandAsync(`fill ${start.x} ${start.y} ${start.z} ${end.x} ${end.y} ${end.z} air replace`);\n}\nexport function cycleNumberBlock(clickEvent: any) {\n  for (let i = 0; i < 9; i++) {\n    //check for element_0 toplement_8\n    if (clickEvent.brokenBlockPermutation?.matches(\"blockbuilders:number_\" + i)) {\n      let nextNumber = i + 1;\n      let blockname = \"blockbuilders:number_\" + nextNumber;\n      clickEvent.block.setPermutation(BlockPermutation.resolve(blockname));\n    }\n    if (clickEvent.brokenBlockPermutation?.matches(\"blockbuilders:number_9\")) {\n      clickEvent.block.setPermutation(BlockPermutation.resolve(\"blockbuilders:number_0\"));\n    }\n  }\n}\n","import { world } from \"@minecraft/server\";\n\nlet overworld = world.getDimension(\"overworld\");\n\nexport async function giveWand() {\n  overworld.runCommandAsync(\n    `give @p[hasitem={item=blockbuilders:mathmogicians_wand,quantity=0}] blockbuilders:mathmogicians_wand 1 0 {\"item_lock\": { \"mode\": \"lock_in_slot\" }, \"minecraft:can_destroy\":{\"blocks\":[\"minecraft:hopper\", \"blockbuilders:number_0\",\"blockbuilders:number_1\",\"blockbuilders:number_2\",\"blockbuilders:number_3\",\"blockbuilders:number_4\",\"blockbuilders:number_5\",\"blockbuilders:number_6\",\"blockbuilders:number_7\",\"blockbuilders:number_8\",\"blockbuilders:number_9\",\"blockbuilders:symbol_subtract\"]}}`\n  );\n}\n","import { BlockPermutation, world, system, Vector3 } from \"@minecraft/server\";\nimport { perfectRun, validRanges, finalBlock, replaySettings, npcLocation } from \"./perfectRun\";\n\nlet overworld = world.getDimension(\"overworld\");\nlet rodsPlaced: any[] = [];\n\nexport async function resetCuisenaireGame() {\n  await overworld.runCommandAsync(`tp @p 29 96 114 facing 29 96 112`);\n  await overworld.runCommandAsync(`tp @e[tag=fractionNpc] 29 96 112 facing 29 96 114`);\n  await overworld.runCommandAsync(`scoreboard objectives setdisplay sidebar Students`);\n  await overworld.runCommandAsync(`scoreboard players set Saved Students 0`);\n  await resetNPC(5);\n  await resetGrid({ x: 19, y: 95, z: 81 }); //top left corner of the area.\n}\n\nexport async function startCuisenaireGame() {\n  resetCuisenaireGame();\n  await giveRods();\n}\n\nexport async function moveNpc(id: number) {\n  let { x, y, z } = getRandomCoordinate();\n  overworld.runCommandAsync(`tp @e[tag=rodNpc${id}] ${x} ${y} ${z}`);\n  overworld.runCommandAsync(`scoreboard players add Saved Students 1`);\n  overworld.runCommandAsync(`dialogue change @e[tag=rodNpc${id}] rodNpc${id}Saved`);\n  overworld.runCommandAsync(`tp @e[tag=fractionNpc] ${npcLocation[id].x} ${npcLocation[id].y} ${npcLocation[id].z}`);\n  overworld.runCommandAsync(`dialogue change @e[tag=fractionNpc] fractionNpc5`);\n}\n\nfunction getRandomCoordinate(): { x: number; y: number; z: number } {\n  const minX = 19;\n  const maxX = 28;\n  const y = 96;\n  const minZ = 106;\n  const maxZ = 110;\n  const x = Math.floor(Math.random() * (maxX - minX + 1)) + minX;\n  const z = Math.floor(Math.random() * (maxZ - minZ + 1)) + minZ;\n  return { x, y, z };\n}\n\nexport async function directionCheck(x: number, z: number, direction: string) {\n  let correctDirection = false;\n  for (const range of validRanges) {\n    if (\n      (range.x !== undefined && x === range.x && isInRange(z, range.zMin!, range.zMax!)) ||\n      (range.z !== undefined && z === range.z && isInRange(x, range.xMin!, range.xMax!))\n    ) {\n      correctDirection = true;\n      break;\n    }\n  }\n  return correctDirection;\n}\n\nfunction isInRange(value: number, min: any, max: any): boolean {\n  return value >= min && value <= max;\n}\n\nexport async function cuisenaire(\n  block: any,\n  blockName: string,\n  rodLength: number,\n  successMessage: string,\n  direction: string\n) {\n  if (block.permutation?.matches(blockName)) {\n    let runPlaceRods = true;\n    overworld.runCommand(`title @p actionbar ${successMessage} placed`);\n    block.setPermutation(BlockPermutation.resolve(\"tallgrass\"));\n    for (let i = 0; i < rodLength; i++) {\n      let colour = block[direction](i)?.permutation?.getState(\"color\");\n      if (colour || block[direction](i)?.permutation?.matches(\"sandstone\")) {\n        overworld.runCommand(\"title @p actionbar That rod is too long!\");\n        overworld.runCommandAsync(`give @p ${blockName} 1 0 {\"minecraft:can_place_on\":{\"blocks\":[\"tallgrass\"]}}`);\n        runPlaceRods = false;\n        break;\n      }\n    }\n    if (runPlaceRods) {\n      let rodToPlace = {\n        location: block.location,\n        direction: direction,\n        rodLength: rodLength,\n        blockName: blockName,\n        successMessage: successMessage,\n      };\n      rodsPlaced.push(rodToPlace);\n      placeRods(block, blockName, rodLength, direction);\n      checkFinalBlock();\n    } else {\n      block?.setPermutation(BlockPermutation.resolve(\"tallgrass\"));\n    }\n  }\n}\n\nexport async function resetNPC(npcAmount: number) {\n  rodsPlaced = []; //resets the rods placed array.\n  for (let i = 0; i < npcAmount; i++) {\n    overworld.runCommandAsync(`dialogue change @e[tag=rodNpc${i}] rodNpc${i}Default`);\n    overworld.runCommandAsync(\n      //tps the npc back based on the location parameter in npcLocation.\n      `tp @e[tag=rodNpc${i}] ${npcLocation[i].x} ${npcLocation[i].y} ${npcLocation[i].z}`\n    );\n  }\n}\n\nfunction placeRods(block: any, blockName: string, rodLength: number, direction: string) {\n  const validDirections = [\"east\", \"west\", \"north\", \"south\"];\n  if (validDirections.includes(direction)) {\n    for (let i = 0; i < rodLength; i++) {\n      block[direction](i).setPermutation(BlockPermutation.resolve(blockName));\n    }\n  } else {\n    throw new Error(`Invalid direction: ${direction}`);\n  }\n}\n\nasync function setCameraView(player: any, index: number) {\n  if (index == 0 || index == 1) {\n    //room1\n    player.runCommandAsync(`camera ${player.name} set minecraft:free pos 30 120 92 facing 30 90 92`);\n  } else if (index == 2 || index == 3 || index == 4) {\n    //room2\n    player.runCommandAsync(`camera ${player.name} set minecraft:free pos 55 120 92 facing 55 90 92`);\n  } else if (index == 5) {\n    //room3\n    player.runCommandAsync(`camera ${player.name} set minecraft:free pos 93 120 92 facing 93 90 92`);\n  } else if (index == 6 || index == 7 || index == 8 || index == 9) {\n    //room4\n    player.runCommandAsync(`camera ${player.name} set minecraft:free pos 105 120 92 facing 105 90 92`);\n  } else if (index == 10 || index == 11 || index == 12) {\n    //room4\n    player.runCommandAsync(`camera ${player.name} set minecraft:free pos -39 120 44 facing -39 94 44`);\n  }\n}\n\nexport async function getBlockBehind(event: any, oppositeDirection: string) {\n  let hasColour = event.block[oppositeDirection](1)?.permutation?.getState(\"color\");\n  return hasColour;\n}\n\nasync function replayMessage(beginningMessage: string, fractions: any[]) {\n  if (fractions) {\n    if (fractions.length > 0) {\n      const playerPlacedFractions = fractions.filter((fraction) => fraction !== undefined && fraction.startsWith(\"1\")); // filters out the fractions\n      const perfectRunFractions = fractions.filter((fraction) => fraction !== undefined && !fraction.startsWith(\"1\")); //filters out the fractions\n\n      if (perfectRunFractions.length > 0) {\n        //if you've reached the end of the list\n        const perfectRunFractionsSum = perfectRunFractions.join(\" + \");\n        overworld.runCommandAsync(`title @p actionbar ${perfectRunFractionsSum}`);\n      } else if (playerPlacedFractions.length > 0) {\n        //else if there are fractions print them\n        const fractionsSum = playerPlacedFractions.join(\" + \");\n        overworld.runCommandAsync(`title @p actionbar ${beginningMessage} ${fractionsSum}`);\n      }\n    }\n  } else {\n    world.sendMessage(`Error: No fractions found`);\n  }\n}\n\nexport async function replay(index: number) {\n  overworld.runCommandAsync(`tp @p 31 96 116`); //moves the player out of frame.\n  let npcIndex = index;\n  let fractions: any[] = [];\n  let combinedRods: any[] = [];\n  let replayConfig = replaySettings[index]; //stores all the replay settings for the different rods.\n  overworld.runCommandAsync(replayConfig.clearBlock);\n  overworld.runCommandAsync(replayConfig.replenishGrass);\n\n  if (replayConfig.cartesianDirection === \"x\") {\n    let rodsPlacedToReplay = rodsPlaced.filter((rod) => rod.location && rod.location.x === replayConfig.cartesionValue);\n    for (let i = 0; i < rodsPlacedToReplay.length; i++) {\n      overworld.runCommandAsync(\n        `give @p ${rodsPlacedToReplay[i].blockName} 1 0 {\"minecraft:can_place_on\":{\"blocks\":[\"tallgrass\"]}}`\n      );\n    }\n    rodsPlaced = rodsPlaced.filter((rod) => !(rod.location && rod.location.x === replayConfig.cartesionValue));\n    let perfectRunToReplay = perfectRun.filter((rod) => rod.location && rod.location.x === replayConfig.cartesionValue); //ISSUE appears to be here\n    if (perfectRunToReplay.length > 1) {\n      perfectRunToReplay = perfectRunToReplay.slice(0, -1); //gets the last one so you don't have a bunch of them appearing.\n    }\n    combinedRods = rodsPlacedToReplay.concat(perfectRunToReplay);\n  } else if (replayConfig.cartesianDirection === \"z\") {\n    let rodsPlacedToReplay = rodsPlaced.filter((rod) => rod.location && rod.location.z === replayConfig.cartesionValue);\n    for (let i = 0; i < rodsPlacedToReplay.length; i++) {\n      overworld.runCommandAsync(\n        `give @p ${rodsPlacedToReplay[i].blockName} 1 0 {\"minecraft:can_place_on\":{\"blocks\":[\"tallgrass\"]}}`\n      );\n    }\n    rodsPlaced = rodsPlaced.filter((rod) => !(rod.location && rod.location.z === replayConfig.cartesionValue));\n    let perfectRunToReplay = perfectRun.filter((rod) => rod.location && rod.location.z === replayConfig.cartesionValue);\n    if (perfectRunToReplay.length > 1) {\n      perfectRunToReplay = perfectRunToReplay.slice(0, -1); //gets the last one so you don't have a bunch of them appearing.\n    }\n    combinedRods = rodsPlacedToReplay.concat(perfectRunToReplay);\n  }\n  if (combinedRods.length > 0) {\n    for (let i = 0; i < combinedRods.length; i++) {\n      ((index) => {\n        system.runTimeout(async () => {\n          let x = combinedRods[index].location.x;\n          world.getAllPlayers().forEach(async (player) => {\n            await setCameraView(player, npcIndex);\n            fractions.push(combinedRods[index].successMessage);\n            await replayMessage(replayConfig.beginningMessage, fractions);\n            let block = overworld.getBlock(combinedRods[index].location);\n            placeRods(\n              block,\n              combinedRods[index].blockName,\n              combinedRods[index].rodLength,\n              combinedRods[index].direction\n            );\n            if (i === combinedRods.length - 1) {\n              //resets the camera 2 seconds after last rod placed.\n              endReplay(\n                player,\n                replayConfig.tpStart,\n                replayConfig.clearBlock,\n                replayConfig.replenishGrass,\n                combinedRods\n              );\n            }\n          });\n        }, 50 * index);\n        return;\n      })(i);\n    }\n  }\n}\n\nfunction endReplay(player: any, tpStart: string, clearCommand: string, replenishGrass: string, combinedRods: any[]) {\n  system.runTimeout(() => {\n    player.runCommandAsync(tpStart);\n    player.runCommandAsync(clearCommand);\n    player.runCommandAsync(replenishGrass);\n    player.runCommandAsync(`camera ${player.name} clear`);\n    combinedRods = []; //clears the combined rods to stop looping values\n  }, 50);\n}\n\n//Resets the area to the original state, one area at a time.\nasync function squareReset(pos1: Vector3, pos2: Vector3, concreteColours: string[]) {\n  for (let i = 0; i < concreteColours.length; i++) {\n    let command = `fill ${pos1.x} ${pos1.y} ${pos1.z} ${pos2.x} ${pos2.y} ${pos2.z} tallgrass replace ${concreteColours[i]}_concrete`;\n    overworld.runCommand(command);\n  }\n  overworld.runCommandAsync(\n    `fill ${pos1.x} ${pos1.y - 1} ${pos1.z} ${pos2.x} ${pos2.y - 1} ${pos2.z} grass replace dirt`\n  );\n  overworld.runCommandAsync(`fill ${pos1.x} ${pos1.y} ${pos1.z} ${pos2.x} ${pos2.y} ${pos2.z} tallgrass replace air`);\n}\n\n//preps the grid coordinates for the squareReset function.\nexport async function resetGrid(location: Vector3) {\n  let concreteColours = [\"red\", \"green\", \"purple\", \"brown\", \"blue\", \"lime\", \"yellow\"]; // What rods will be replaced.\n  for (let i = 0; i < 4; i++) {\n    let offset_x = location.x + i * 25; // 25 is the distance between each starting point of the grid.\n    let pos1 = { x: offset_x, y: location.y, z: location.z };\n    let pos2 = { x: offset_x + 24, y: location.y, z: location.z + 24 };\n    await squareReset(pos1, pos2, concreteColours);\n  }\n}\n\nexport async function giveRods() {\n  let rods = [\n    { block: \"red_concrete\", amount: 2 },\n    { block: \"lime_concrete\", amount: 1 },\n    { block: \"purple_concrete\", amount: 2 },\n    { block: \"green_concrete\", amount: 2 },\n    { block: \"brown_concrete\", amount: 3 },\n    { block: \"yellow_concrete\", amount: 1 },\n    { block: \"blue_concrete\", amount: 2 },\n  ];\n  overworld.runCommandAsync(`clear @p`);\n  overworld.runCommandAsync(`gamemode adventure`);\n  for (let i = 0; i < rods.length; i++) {\n    overworld.runCommandAsync(\n      `give @p ${rods[i].block} ${rods[i].amount} 0 {\"minecraft:can_place_on\":{\"blocks\":[\"tallgrass\"]}}`\n    );\n  }\n}\n\nasync function checkFinalBlock() {\n  for (let i = 0; i < finalBlock.length; i++) {\n    let rodEnd = overworld.getBlock(finalBlock[i].location);\n    let hasColour = rodEnd?.permutation?.getState(\"color\");\n    if (rodEnd?.permutation?.matches(finalBlock[i].blockName)) {\n      changeNPC(i, true);\n    } else if (hasColour) {\n      changeNPC(i, false);\n    }\n  }\n}\n\nasync function changeNPC(matchingRodIndex: number, win: boolean) {\n  //changes the NPC to the success state based on the matchingRodIndex in cuisenaire function.\n  if (win) {\n    overworld.runCommandAsync(`dialogue change @e[tag=rodNpc${matchingRodIndex}] rodNpc${matchingRodIndex}Win`);\n  } else {\n    //changes the NPC\n    overworld.runCommandAsync(`dialogue change @e[tag=rodNpc${matchingRodIndex}] rodNpc${matchingRodIndex}Fail`);\n  }\n}\n","//defines variables for the cuisneaire rod game.\n\nexport const perfectRun = [\n  {\n    location: { z: 104, y: 95, x: 30 },\n    direction: \"north\",\n    rodLength: 12,\n    blockName: \"yellow_concrete\",\n    successMessage: `Instead use a 1/2 rod as that is half of 24.`,\n  }, //1/2\n  {\n    location: { z: 92, y: 95, x: 31 },\n    direction: \"east\",\n    rodLength: 6,\n    blockName: \"green_concrete\",\n    successMessage: `For 1/4 of 24 use a 6 rod.`,\n  }, //1/4\n  {\n    location: { z: 91, y: 95, x: 44 },\n    direction: \"east\",\n    rodLength: 8,\n    blockName: \"brown_concrete\",\n    successMessage: `Use an 8 rod to make up a 1/3.`,\n  }, //1/3\n  {\n    location: { z: 94, y: 95, x: 53 },\n    direction: \"south\",\n    rodLength: 4,\n    blockName: \"purple_concrete\",\n    successMessage: `Four is a sixth of 24.`,\n  }, //1/6\n  {\n    location: { z: 100, y: 95, x: 55 },\n    direction: \"east\",\n    rodLength: 8,\n    blockName: \"brown_concrete\",\n    successMessage: `The most efficient way is to simplify 2/6 to 1/3.`,\n  }, //2/6\n\n  //{ location: { z: 99, y: 95, x: 69 }, direction: \"east\", rodLength: 24, blockName: \"blue_concrete\", successMessage: `The largest rod you have is a whole, so place two of them.` }, //1/1\n  {\n    location: { z: 99, y: 95, x: 93 },\n    direction: \"east\",\n    rodLength: 24,\n    blockName: \"blue_concrete\",\n    successMessage: `The largest rod you have is a whole, so place two of them.`,\n  }, //1/1\n  {\n    location: { z: 95, y: 95, x: 115 },\n    direction: \"west\",\n    rodLength: 3,\n    blockName: \"lime_concrete\",\n    successMessage: `Three is 1/8 of 24. `,\n  }, //1/3\n  {\n    location: { z: 94, y: 95, x: 109 },\n    direction: \"west\",\n    rodLength: 6,\n    blockName: \"green_concrete\",\n    successMessage: `Simplify 2/8 to 1/4 to get the most efficient way across`,\n  }, //1/6\n  {\n    location: { z: 92, y: 95, x: 99 },\n    direction: \"north\",\n    rodLength: 2,\n    blockName: \"red_concrete\",\n    successMessage: `Two is 1/2 of 24.`,\n  }, //1/2\n  {\n    location: { z: 89, y: 95, x: 97 },\n    direction: \"west\",\n    rodLength: 4,\n    blockName: \"purple_concrete\",\n    successMessage: `Simplify 2/12 to get the most optimum route`,\n  }, //1/4\n  {\n    location: { z: 89, y: 95, x: 92 },\n    direction: \"west\",\n    rodLength: 2,\n    blockName: \"red_concrete\",\n    successMessage: `Two is 1/2 of 24.`,\n  }, //1/2\n  {\n    location: { z: 89, y: 95, x: 87 },\n    direction: \"west\",\n    rodLength: 8,\n    blockName: \"brown_concrete\",\n    successMessage: `Error this message shouldn't be able to be seen. It means the rod amounts are incorrect.`,\n  }, //1/3\n];\n\nexport const validRanges = [\n  { x: 30, zMin: 93, zMax: 104 },\n  { xMin: 31, xMax: 36, z: 92 },\n  { xMin: 44, xMax: 51, z: 91 },\n  { x: 53, zMin: 94, zMax: 97 },\n  { xMin: 55, xMax: 62, z: 100 },\n  { xMin: 69, xMax: 116, z: 99 },\n  { xMin: 113, xMax: 115, z: 95 },\n  { xMin: 101, xMax: 109, z: 94 },\n  { x: 99, zMin: 91, zMax: 92 },\n  { xMin: 94, xMax: 97, z: 89 },\n  { xMin: 91, xMax: 92, z: 89 },\n  { xMin: 80, xMax: 87, z: 89 },\n];\n\nexport const finalBlock = [\n  { location: { z: 93, y: 95, x: 30 }, blockName: \"yellow_concrete\" },\n  { location: { z: 92, y: 95, x: 36 }, blockName: \"green_concrete\" },\n  { location: { z: 91, y: 95, x: 51 }, blockName: \"brown_concrete\" },\n  { location: { z: 97, y: 95, x: 53 }, blockName: \"purple_concrete\" },\n  { location: { z: 100, y: 95, x: 62 }, blockName: \"brown_concrete\" },\n  { location: { z: 99, y: 95, x: 92 }, blockName: \"blue_concrete\" },\n  { location: { z: 99, y: 95, x: 116 }, blockName: \"blue_concrete\" },\n  { location: { z: 95, y: 95, x: 113 }, blockName: \"lime_concrete\" },\n  { location: { z: 94, y: 95, x: 104 }, blockName: \"green_concrete\" },\n  { location: { z: 91, y: 95, x: 99 }, blockName: \"red_concrete\" },\n  { location: { z: 89, y: 95, x: 94 }, blockName: \"purple_concrete\" },\n  { location: { z: 89, y: 95, x: 91 }, blockName: \"red_concrete\" },\n  { location: { z: 89, y: 95, x: 80 }, blockName: \"brown_concrete\" },\n];\n\nexport const replaySettings = [\n  {\n    // Message to display at the beginning of the replay\n    beginningMessage: `To make 1/2 you placed: `,\n\n    // Command to teleport the player to the starting position of the last platform they were on and set their facing direction\n    tpStart: `tp @p 31 96 107 facing 31 96 100`,\n\n    // Command to clear the rods they just placed by replacing blocks with tallgrass\n    clearBlock: `fill 30 95 104 30 95 93 tallgrass replace`,\n\n    // Command to replenish the grass under the rods they just placed, same coordinates as above with y axis 94.\n    replenishGrass: `fill 30 94 104 30 94 93 grass_block replace`,\n\n    // Direction along which the rods are placed ('x' or 'z'). This will be the value that is always the same.\n    cartesianDirection: \"x\",\n\n    // Specific value of the x or z that is the same on all the coordinates.\n    cartesionValue: 30,\n  },\n  {\n    beginningMessage: `To make 1/4 you placed: `,\n    tpStart: `tp @p 30 96 92 facing 38 96 92`,\n    clearBlock: `fill 31 95 92 36 95 92 tallgrass replace`,\n    replenishGrass: `fill 31 94 92 36 94 92 grass_block replace`,\n    cartesianDirection: \"z\",\n    cartesionValue: 92,\n  },\n  {\n    beginningMessage: `To make 1/3 you placed: `,\n    tpStart: `tp @p 41 96 91 facing 53 96 91`,\n    clearBlock: `fill 51 95 91 44 95 91 tallgrass replace`,\n    replenishGrass: `fill 51 94 91 44 94 91 grass_block replace`,\n    cartesianDirection: \"z\",\n    cartesionValue: 91,\n  },\n  {\n    beginningMessage: `To make 1/6 you placed: `,\n    tpStart: `tp @p 53 96 92 facing 53 96 98`,\n    clearBlock: `fill 53 95 94 53 95 97 tallgrass replace`,\n    replenishGrass: `fill 53 94 94 53 94 97 grass_block replace`,\n    cartesianDirection: \"x\",\n    cartesionValue: 53,\n  },\n  {\n    beginningMessage: `To make 2/6 you placed: `,\n    tpStart: `tp @p 54 96 99 facing 63 96 99`,\n    clearBlock: `fill 55 95 100 62 95 100 tallgrass replace`,\n    replenishGrass: `fill 55 94 100 62 94 100 grass_block replace`,\n    cartesianDirection: \"z\",\n    cartesionValue: 100,\n  },\n  {\n    beginningMessage: `To make 2/1 you placed: `,\n    tpStart: `tp @p 67 96 99 facing 117 96 99`,\n    clearBlock: `fill 69 95 99 116 95 99 tallgrass replace`,\n    replenishGrass: `fill 69 94 99 116 94 99 grass_block replace`,\n    cartesianDirection: \"z\",\n    cartesionValue: 99,\n  },\n  {\n    beginningMessage: `To make 1/8 you placed: `,\n    tpStart: `tp @p 117 96 95 facing 112 96 95`,\n    clearBlock: `fill 115 95 95 113 95 95 tallgrass replace`,\n    replenishGrass: `fill 115 94 95 113 94 95 grass_block replace`,\n    cartesianDirection: \"z\",\n    cartesionValue: 95,\n  },\n  {\n    beginningMessage: `To make 2/8 you placed: `,\n    tpStart: `tp @p 111 96 94 facing 103 96 94`,\n    clearBlock: `fill 109 95 94 104 95 94 tallgrass replace`,\n    replenishGrass: `fill 109 94 94 104 94 94 grass_block replace`,\n    cartesianDirection: \"z\",\n    cartesionValue: 94,\n  },\n  {\n    beginningMessage: `To make 1/12 you placed: `,\n    tpStart: `tp @p 99 96 94 facing 99 96 90`,\n    clearBlock: `fill 99 95 92 99 95 91 tallgrass replace`,\n    replenishGrass: `fill 99 94 92 99 94 91 grass_block replace`,\n    cartesianDirection: \"x\",\n    cartesionValue: 99,\n  },\n  {\n    beginningMessage: `To make 2/12 you placed: `,\n    tpStart: `tp @p 99 96 89 facing 93 96 89`,\n    clearBlock: `fill 97 95 89 94 95 89 tallgrass replace`,\n    replenishGrass: `fill 97 94 89 94 94 89 grass_block replace`,\n    cartesianDirection: \"z\",\n    cartesionValue: 89,\n  },\n  {\n    beginningMessage: `To make 1/12 you placed: `,\n    tpStart: `tp @p 93 96 88 facing 90 96 89`,\n    clearBlock: `fill 92 95 89 91 95 89 tallgrass replace`,\n    replenishGrass: `fill 92 94 89 91 94 89 grass_block replace`,\n    cartesianDirection: \"z\",\n    cartesionValue: 89,\n  },\n  {\n    beginningMessage: `To make 1/3 you placed: `,\n    tpStart: `tp @p 89 96 89 facing 79 96 89`,\n    clearBlock: `fill 87 95 89 80 95 89 tallgrass replace`,\n    replenishGrass: `fill 87 94 89 80 94 89 grass_block replace`,\n    cartesianDirection: \"z\",\n    cartesionValue: 89,\n  },\n];\n\nexport const npcLocation = [\n  { x: 29, y: 96, z: 90 },\n  { x: 38, y: 96, z: 92 },\n  { x: 53, y: 96, z: 90 },\n  { x: 53, y: 96, z: 100 },\n  { x: 66, y: 96, z: 100 },\n];\n","import { Vector3 } from \"@minecraft/server\";\n\nexport async function facing(blockLocation: Vector3) {\n  const xDiff = Math.abs(blockLocation.x);\n  const zDiff = Math.abs(blockLocation.z);\n\n  let direction;\n\n  if (xDiff > zDiff) {\n    direction = blockLocation.x > 0 ? \"east\" : \"west\";\n  } else {\n    direction = blockLocation.z > 0 ? \"south\" : \"north\";\n  }\n\n  const oppositeDirections: { [key: string]: string } = {\n    east: \"west\",\n    west: \"east\",\n    south: \"north\",\n    north: \"south\",\n  };\n  let oppositeDirection = oppositeDirections[direction];\n\n  return { direction, oppositeDirection };\n}\n","import { BlockPermutation, BlockInventoryComponent, system, world, EntityInventoryComponent } from \"@minecraft/server\";\nimport { getBlockValue } from \"./input\";\nimport { giveWand } from \"./wand\";\n\nlet overworld = world.getDimension(\"overworld\");\n\nexport async function resetPotionGame() {\n  await overworld.runCommandAsync(\"tp @e[tag=coin0] -6 90 155\");\n  await overworld.runCommandAsync(\"tp @e[tag=coin2] -5 86 154\");\n  await overworld.runCommandAsync(\"tp @e[tag=coin4] -6 82 155\");\n  await overworld.runCommandAsync(\"tp @e[tag=coin6] -5 78 154\");\n  await overworld.runCommandAsync(\"tp @e[tag=coin8] -6 75 155\");\n  await overworld.runCommandAsync(\"tp @e[tag=coin10] -5 75 154\");\n  await overworld.runCommandAsync(\"fill -7 97 139 -3 97 139 minecraft:air\");\n  await overworld.runCommandAsync(\"fill -3 126 138 -7 126 138 minecraft:black_concrete\");\n  await resetArea();\n}\nexport async function startPotionGame() {\n  await overworld.runCommandAsync(`clear @p`);\n  await overworld.runCommandAsync(\"fill -3 126 138 -7 126 138 minecraft:air\");\n  await giveWand();\n  await giveIngredients();\n}\n\nexport async function getSlots(hopper: EntityInventoryComponent) {\n  let slots = [];\n  for (let i = 0; i <= 4; i++) {\n    let item = hopper?.container?.getItem(i);\n    slots.push({\n      slotNumber: i,\n      amount: item?.amount,\n      typeId: item?.typeId,\n    });\n  }\n  return slots;\n}\n\nasync function givePotion() {\n  world.getDimension(\"overworld\").runCommandAsync(`clear @p minecraft:potion`);\n  world.getDimension(\"overworld\").runCommandAsync(`give @p minecraft:potion 1`);\n}\n\nasync function calculateRatio(ingredients: any) {\n  //remaps ingredients from Minecraft name to in game name.\n  let carrot: number = ingredients.carrot;\n  let glowDust: number = ingredients.apple;\n  let kelp: number = ingredients.potato;\n  let pufferFish: number = ingredients.beetroot;\n  let mermaidTears: number = ingredients.melon;\n  let milk: number = ingredients.milk_bucket;\n  let cocoaBeans: number = ingredients.cocoa_beans;\n  const hasIngredients = carrot + glowDust + kelp + pufferFish + mermaidTears + milk + cocoaBeans > 0;\n  const isChocolateMilk =\n    cocoaBeans * 1 === milk * 2 && carrot + glowDust + kelp + pufferFish + mermaidTears === 0 && hasIngredients;\n  const isNotChocolateMilk =\n    cocoaBeans * 1 !== milk * 2 && carrot + glowDust + kelp + pufferFish + mermaidTears === 0 && hasIngredients;\n  if (isChocolateMilk) {\n    overworld.runCommandAsync(`dialogue change @e[tag=ratioNpc] ratioNpc3`);\n    overworld.runCommandAsync(`dialogue open @e[tag=ratioNpc] @p ratioNpc6`);\n  } else if (isNotChocolateMilk) {\n    overworld.runCommandAsync(`dialogue open @e[tag=ratioNpc] @p ratioNpc7`);\n  }\n  //calculates the ratio of ingredients. Testing for correct ratio and wrong ratio.\n  const isCorrectNightVisionPotion =\n    carrot * 5 === glowDust * 3 && kelp + pufferFish + mermaidTears === 0 && hasIngredients;\n  const isCorrectWaterBreathingPotion =\n    kelp * 40 === pufferFish * 24 && kelp * 40 === mermaidTears * 15 && carrot + glowDust === 0 && hasIngredients;\n  const isWrongNightVisionPotion =\n    carrot * 5 !== glowDust * 3 && kelp + pufferFish + mermaidTears === 0 && hasIngredients;\n  const isWrongWaterBreathingPotion =\n    (kelp * 40 !== pufferFish * 24 || kelp * 40 !== mermaidTears * 15) && carrot + glowDust === 0 && hasIngredients;\n\n  //maps the correct outcomes of the potion game to the correct potion and seconds.\n  if (hasIngredients) {\n    if (isCorrectNightVisionPotion) {\n      return { potion: \"night_vision\", seconds: 5 };\n    } else if (isCorrectWaterBreathingPotion) {\n      return { potion: \"water_breathing\", seconds: mermaidTears * 2 };\n    } else if (isWrongNightVisionPotion) {\n      return { potion: \"blindness\", seconds: 4 };\n    } else if (isWrongWaterBreathingPotion) {\n      return { potion: \"levitation\", seconds: 4 };\n    } else {\n      return { potion: \"empty\", seconds: 0 };\n    }\n  } else {\n    return { potion: \"none\", seconds: 0 };\n  }\n}\n\nasync function barChart(slots: any) {\n  let ingredients = {\n    apple: 0,\n    carrot: 0,\n    potato: 0,\n    beetroot: 0,\n    melon: 0,\n    milk_bucket: 0,\n    cocoa_beans: 0,\n  };\n  for (let slot of slots) {\n    switch (slot.typeId) {\n      case \"minecraft:milk_bucket\": {\n        ingredients.milk_bucket = (ingredients.milk_bucket || 0) + slot.amount;\n        break;\n      }\n      case \"minecraft:cocoa_beans\": {\n        ingredients.cocoa_beans = (ingredients.cocoa_beans || 0) + slot.amount;\n        break;\n      }\n      case \"minecraft:apple\": {\n        await setGlass(slot, \"red_stained_glass\");\n        await setItemFrame(0, slot.slotNumber);\n        ingredients.apple = (ingredients.apple || 0) + slot.amount;\n        break;\n      }\n      case \"minecraft:carrot\": {\n        await setGlass(slot, \"orange_stained_glass\");\n        await setItemFrame(1, slot.slotNumber);\n        ingredients.carrot = (ingredients.carrot || 0) + slot.amount;\n        break;\n      }\n      case \"minecraft:potato\": {\n        await setGlass(slot, \"yellow_stained_glass\");\n        await setItemFrame(2, slot.slotNumber);\n        ingredients.potato = (ingredients.potato || 0) + slot.amount;\n        break;\n      }\n      case \"minecraft:beetroot\": {\n        await setGlass(slot, \"purple_stained_glass\");\n        await setItemFrame(3, slot.slotNumber);\n        ingredients.beetroot = (ingredients.beetroot || 0) + slot.amount;\n        break;\n      }\n      case \"minecraft:melon_slice\": {\n        await setGlass(slot, \"green_stained_glass\");\n        await setItemFrame(4, slot.slotNumber);\n        ingredients.melon = (ingredients.melon || 0) + slot.amount;\n        break;\n      }\n      default: {\n        //empty\n        await setItemFrame(5, slot.slotNumber);\n        break;\n      }\n    }\n  }\n  return ingredients;\n}\nasync function setGlass(slot: any, blockName: string) {\n  let { block } = getBlockValue({ x: -7, y: 97, z: 138 });\n  block?.east(slot.slotNumber)?.setPermutation(BlockPermutation.resolve(blockName));\n  let height = 0;\n  if (slot.amount > 20) {\n    height = 20;\n  } else {\n    height = slot.amount;\n  }\n  for (let i = 0; i < height; i++) {\n    block?.above(i)?.east(slot.slotNumber)?.setPermutation(BlockPermutation.resolve(blockName));\n  }\n}\nasync function setItemFrame(offset_z: number, slotNumber: number) {\n  let cloneFrom = -7 + offset_z;\n  let cloneTo = -7 + slotNumber;\n  world\n    .getDimension(\"overworld\")\n    .runCommandAsync(`clone ${cloneFrom} 121 139 ${cloneFrom} 121 139 ${cloneTo} 97 139 replace`);\n}\n\nexport async function potionMaker(slots: any) {\n  await resetArea();\n  let ingredients = await barChart(slots);\n  let { potion, seconds } = await calculateRatio(ingredients);\n  if (potion !== \"empty\" && potion !== \"none\") {\n    await givePotion();\n  }\n  return { potion, seconds };\n}\n\nasync function resetArea() {\n  await world.getDimension(\"overworld\").runCommandAsync(\"fill -7 96 138 -3 116 138 black_stained_glass replace\");\n}\n\nexport async function giveIngredients() {\n  overworld.runCommand(\"replaceitem entity @p slot.hotbar 1 apple 20\");\n  overworld.runCommand(\"replaceitem entity @p slot.hotbar 2 carrot 20\");\n  overworld.runCommand(\"replaceitem entity @p slot.hotbar 3 beetroot 20\");\n  overworld.runCommand(\"replaceitem entity @p slot.hotbar 4 potato 20\");\n  overworld.runCommand(\"replaceitem entity @p slot.hotbar 5 melon_slice 20\");\n}\n\nexport function displayTimer(potionStart: number, seconds: number, player: any, potionDescription: string) {\n  let timeLeft = (potionStart + seconds * 20 - system.currentTick) / 20;\n  if (timeLeft % 1 === 0) {\n    player.onScreenDisplay.setActionBar(`Time left:\\n ${potionDescription} ${timeLeft} seconds`);\n  }\n}\n","import { system, world } from \"@minecraft/server\";\nimport { moveNpc, replay, startCuisenaireGame, resetCuisenaireGame } from \"./cuisenaireRods\";\nimport { perfectRun } from \"./perfectRun\";\nimport { openGate, closeGate } from \"./gate\";\nimport { npcWalk } from \"./npcWalk\";\nimport { startWindowGame, resetWindowGame, giveGlass } from \"./stainedGlassWindow\";\nimport { startPotionGame, resetPotionGame, giveIngredients } from \"./potionGame\";\nimport { resetGame } from \"./resetGame\";\nimport { giveWand } from \"./wand\";\n\nlet overworld = world.getDimension(\"overworld\");\n//handles the scriptEventReceive from NPCs\nsystem.afterEvents.scriptEventReceive.subscribe(async (event) => {\n  switch (event.id) {\n    case \"game:reset\": {\n      await resetGame();\n      break;\n    }\n    case \"rod:npcReplay\": {\n      replay(parseInt(event.message));\n      break;\n    }\n    case \"rod:npcComplete\": {\n      moveNpc(parseInt(event.message));\n      break;\n    }\n    case \"spawn:npc\": {\n      openGate(\"spawn\");\n      if (event.message === \"fraction\") {\n        overworld.runCommandAsync(`tp @e[tag=fractionNpc] 57 96 148 facing 66 96 148`);\n        overworld.runCommandAsync(`tp @e[tag=spawnNpc] 63 92 146`);\n      } else if (event.message === \"ratio\") {\n        overworld.runCommandAsync(`tp @e[tag=ratioNpc] 57 96 148 facing 66 96 148`);\n        overworld.runCommandAsync(`tp @e[tag=spawnNpc] 63 92 146`);\n      } else if (event.message === \"scale\") {\n        overworld.runCommandAsync(`tp @e[tag=scaleNpc] 57 96 148 facing 66 96 148`);\n        overworld.runCommandAsync(`tp @e[tag=spawnNpc] 63 92 146`);\n      } else {\n        world.sendMessage(`spawnNpc triggered with invalid message`);\n      }\n      break;\n    }\n    case \"gate:open\": {\n      openGate(event.message);\n      break;\n    }\n    case \"gate:close\": {\n      closeGate(event.message);\n      break;\n    }\n    case \"scale:npc\": {\n      switch (event.message) {\n        case \"0\": {\n          openGate(\"scale\");\n          closeGate(\"ratio\");\n          closeGate(\"fraction\");\n          await npcWalk(\"scale\");\n          break;\n        }\n        case \"1\": {\n          overworld.runCommandAsync(`dialogue change @e[tag=scaleNpc] scaleNpc3`);\n          startWindowGame();\n          break;\n        }\n        case \"2\": {\n          giveGlass();\n          break;\n        }\n      }\n      break;\n    }\n    case \"ratio:npc\": {\n      switch (event.message) {\n        case \"0\": {\n          openGate(\"ratio\");\n          closeGate(\"scale\");\n          closeGate(\"fraction\");\n          await npcWalk(\"ratio\");\n          break;\n        }\n        case \"1\": {\n          overworld.runCommandAsync(`dialogue change @e[tag=ratioNpc] ratioNpc3`);\n          startPotionGame();\n          break;\n        }\n        case \"2\": {\n          await giveIngredients();\n          break;\n        }\n        case \"3\": {\n          giveWand();\n          overworld.runCommandAsync(`dialogue change @e[tag=ratioNpc] ratioNpc2`);\n          overworld.runCommand(\"replaceitem entity @p slot.hotbar 1 cocoa_beans 2\");\n          overworld.runCommand(\"replaceitem entity @p slot.hotbar 2 milk_bucket 1\");\n        }\n      }\n      break;\n    }\n    case \"fraction:npc\": {\n      switch (event.message) {\n        case \"0\": {\n          openGate(\"fraction\");\n          closeGate(\"scale\");\n          closeGate(\"ratio\");\n          await npcWalk(\"fraction\");\n          break;\n        }\n        case \"1\": {\n          overworld.runCommandAsync(`dialogue change @e[tag=fractionNpc] fractionNpc3`);\n          startCuisenaireGame();\n          break;\n        }\n      }\n      break;\n    }\n  }\n});\n","import { world } from \"@minecraft/server\";\n\nlet overworld = world.getDimension(\"overworld\");\n\nexport async function openGate(location: string) {\n  switch (location) {\n    case \"spawn\": {\n      //clear\n      overworld.runCommandAsync(`setblock 62 97 148 air`);\n      overworld.runCommandAsync(`setblock 62 97 147 air`);\n      overworld.runCommandAsync(`setblock 62 98 148 air`);\n      overworld.runCommandAsync(`setblock 62 98 147 air`);\n      // right gate facing out.\n      overworld.runCommandAsync(`setblock 61 97 146 iron_bars`);\n      overworld.runCommandAsync(`setblock 60 97 146 iron_bars`);\n      overworld.runCommandAsync(`setblock 61 98 146 iron_bars`);\n      overworld.runCommandAsync(`setblock 60 98 146 iron_bars`);\n      // left gate facing out\n      overworld.runCommandAsync(`setblock 61 97 149 iron_bars`);\n      overworld.runCommandAsync(`setblock 60 97 149 iron_bars`);\n      overworld.runCommandAsync(`setblock 61 98 149 iron_bars`);\n      overworld.runCommandAsync(`setblock 60 98 149 iron_bars`);\n      break;\n    }\n    case \"scale\": {\n      //clear\n      overworld.runCommandAsync(`setblock 56 96 158 air`);\n      overworld.runCommandAsync(`setblock 57 96 158 air`);\n      overworld.runCommandAsync(`setblock 56 97 158 air`);\n      overworld.runCommandAsync(`setblock 57 97 158 air`);\n      // right gate facing out.\n      overworld.runCommandAsync(`setblock 58 96 159 iron_bars`);\n      overworld.runCommandAsync(`setblock 58 96 160 iron_bars`);\n      overworld.runCommandAsync(`setblock 58 97 159 iron_bars`);\n      overworld.runCommandAsync(`setblock 58 97 160 iron_bars`);\n      // left gate facing out\n      overworld.runCommandAsync(`setblock 55 96 159 iron_bars`);\n      overworld.runCommandAsync(`setblock 55 96 160 iron_bars`);\n      overworld.runCommandAsync(`setblock 55 97 159 iron_bars`);\n      overworld.runCommandAsync(`setblock 55 97 160 iron_bars`);\n      break;\n    }\n    case \"ratio\": {\n      //clear\n      overworld.runCommandAsync(`setblock 45 96 148 air`);\n      overworld.runCommandAsync(`setblock 45 96 147 air`);\n      overworld.runCommandAsync(`setblock 45 97 148 air`);\n      overworld.runCommandAsync(`setblock 45 97 147 air`);\n      // right gate facing out.\n      overworld.runCommandAsync(`setblock 44 96 149 iron_bars`);\n      overworld.runCommandAsync(`setblock 43 96 149 iron_bars`);\n      overworld.runCommandAsync(`setblock 44 97 149 iron_bars`);\n      overworld.runCommandAsync(`setblock 43 97 149 iron_bars`);\n      // left gate facing out\n      overworld.runCommandAsync(`setblock 44 96 146 iron_bars`);\n      overworld.runCommandAsync(`setblock 43 96 146 iron_bars`);\n      overworld.runCommandAsync(`setblock 44 97 146 iron_bars`);\n      overworld.runCommandAsync(`setblock 43 97 146 iron_bars`);\n      break;\n    }\n    case \"fraction\": {\n      //clear\n      overworld.runCommandAsync(`setblock 56 96 137 air`);\n      overworld.runCommandAsync(`setblock 57 96 137 air`);\n      overworld.runCommandAsync(`setblock 56 97 137 air`);\n      overworld.runCommandAsync(`setblock 57 97 137 air`);\n      // right gate facing out.\n      overworld.runCommandAsync(`setblock 55 96 136 iron_bars`);\n      overworld.runCommandAsync(`setblock 55 96 135 iron_bars`);\n      overworld.runCommandAsync(`setblock 55 97 136 iron_bars`);\n      overworld.runCommandAsync(`setblock 55 97 135 iron_bars`);\n      // left gate facing out\n      overworld.runCommandAsync(`setblock 58 96 136 iron_bars`);\n      overworld.runCommandAsync(`setblock 58 96 135 iron_bars`);\n      overworld.runCommandAsync(`setblock 58 97 136 iron_bars`);\n      overworld.runCommandAsync(`setblock 58 97 135 iron_bars`);\n      break;\n    }\n  }\n}\n\nexport async function closeGate(location: string) {\n  switch (location) {\n    case \"spawn\": {\n      // set gates\n      overworld.runCommandAsync(`setblock 62 97 148 iron_bars`);\n      overworld.runCommandAsync(`setblock 62 97 147 iron_bars`);\n      overworld.runCommandAsync(`setblock 62 98 148 iron_bars`);\n      overworld.runCommandAsync(`setblock 62 98 147 iron_bars`);\n      // clear right gate facing out\n      overworld.runCommandAsync(`setblock 61 97 146 air`);\n      overworld.runCommandAsync(`setblock 60 97 146 air`);\n      overworld.runCommandAsync(`setblock 61 98 146 air`);\n      overworld.runCommandAsync(`setblock 60 98 146 air`);\n      // clear left gate facing out\n      overworld.runCommandAsync(`setblock 61 97 149 air`);\n      overworld.runCommandAsync(`setblock 60 97 149 air`);\n      overworld.runCommandAsync(`setblock 61 98 149 air`);\n      overworld.runCommandAsync(`setblock 60 98 149 air`);\n      break;\n    }\n    case \"scale\": {\n      // set gates\n      overworld.runCommandAsync(`setblock 56 96 158 iron_bars`);\n      overworld.runCommandAsync(`setblock 57 96 158 iron_bars`);\n      overworld.runCommandAsync(`setblock 56 97 158 iron_bars`);\n      overworld.runCommandAsync(`setblock 57 97 158 iron_bars`);\n      // clear right gate facing out\n      overworld.runCommandAsync(`setblock 58 96 159 air`);\n      overworld.runCommandAsync(`setblock 58 96 160 air`);\n      overworld.runCommandAsync(`setblock 58 97 159 air`);\n      overworld.runCommandAsync(`setblock 58 97 160 air`);\n      // clear left gate facing out\n      overworld.runCommandAsync(`setblock 55 96 159 air`);\n      overworld.runCommandAsync(`setblock 55 96 160 air`);\n      overworld.runCommandAsync(`setblock 55 97 159 air`);\n      overworld.runCommandAsync(`setblock 55 97 160 air`);\n      break;\n    }\n    case \"ratio\": {\n      // set gates\n      overworld.runCommandAsync(`setblock 45 96 148 iron_bars`);\n      overworld.runCommandAsync(`setblock 45 96 147 iron_bars`);\n      overworld.runCommandAsync(`setblock 45 97 148 iron_bars`);\n      overworld.runCommandAsync(`setblock 45 97 147 iron_bars`);\n      // clear right gate facing out\n      overworld.runCommandAsync(`setblock 44 96 149 air`);\n      overworld.runCommandAsync(`setblock 43 96 149 air`);\n      overworld.runCommandAsync(`setblock 44 97 149 air`);\n      overworld.runCommandAsync(`setblock 43 97 149 air`);\n      // clear left gate facing out\n      overworld.runCommandAsync(`setblock 44 96 146 air`);\n      overworld.runCommandAsync(`setblock 43 96 146 air`);\n      overworld.runCommandAsync(`setblock 44 97 146 air`);\n      overworld.runCommandAsync(`setblock 43 97 146 air`);\n      break;\n    }\n    case \"fraction\": {\n      // set gates\n      overworld.runCommandAsync(`setblock 56 96 137 iron_bars`);\n      overworld.runCommandAsync(`setblock 57 96 137 iron_bars`);\n      overworld.runCommandAsync(`setblock 56 97 137 iron_bars`);\n      overworld.runCommandAsync(`setblock 57 97 137 iron_bars`);\n      // clear right gate facing out\n      overworld.runCommandAsync(`setblock 55 96 136 air`);\n      overworld.runCommandAsync(`setblock 55 96 135 air`);\n      overworld.runCommandAsync(`setblock 55 97 136 air`);\n      overworld.runCommandAsync(`setblock 55 97 135 air`);\n      // clear left gate facing out\n      overworld.runCommandAsync(`setblock 58 96 136 air`);\n      overworld.runCommandAsync(`setblock 58 96 135 air`);\n      overworld.runCommandAsync(`setblock 58 97 136 air`);\n      overworld.runCommandAsync(`setblock 58 97 135 air`);\n      break;\n    }\n  }\n}\n","import { world, system, Player } from \"@minecraft/server\";\n\nlet overworld = world.getDimension(\"overworld\");\n\nconst ratioMessage = [\n  { message: \"You should know, no one has \\nwon my well game in 50 years.\", step: 0 },\n  {\n    message: \"The trick to getting the coins is to mix §astronger potions §fto the \\n§acorrect ratios.\",\n    step: 18,\n  },\n  {\n    message: \"You'll need to make a §aNight Vision§f potion first.\\nThen a strong §aBreathing§f potion to succeed.\",\n    step: 38,\n  },\n];\n\nconst fractionMessage = [\n  { message: \"You §acan't jump or step on the grass §fin the gardens.\\nYou'll be told off if you do!\", step: 0 },\n  { message: \"I'll give you magical rods that you can cross the gardens with.\", step: 25 },\n  { message: \"The gardens are §a24x24§f blocks wide.\\nEach student is a different fraction of 24 away.\", step: 45 },\n];\n\nconst scaleMessage = [\n  { message: \"You'll need to change the §anumerator§f (the top number) \\nto scale the windows.\", step: 0 },\n  {\n    message:\n      \"To make the window larger you'll need to make the \\n§anumerator larger§f than the denominator (bottom number).\",\n    step: 25,\n  },\n  { message: \"The windows must fit in the frame!\\nSo make sure you don't make the windows too big.\", step: 50 },\n];\nexport async function npcWalk(type: string) {\n  switch (type) {\n    case \"scale\": {\n      let path = await generatePath([\n        { x: 57, y: 96, z: 148 },\n        { x: 57, y: 96, z: 221 },\n        { x: 70, y: 96, z: 221 },\n        { x: 70, y: 96, z: 228 },\n        { x: 70, y: 96, z: 227 },\n      ]);\n      moveNpc(path, \"scale\", scaleMessage);\n      break;\n    }\n    case \"fraction\": {\n      let path = await generatePath([\n        { x: 57, y: 96, z: 148 },\n        { x: 57, y: 96, z: 116 },\n        { x: 29, y: 96, z: 116 },\n        { x: 29, y: 96, z: 112 },\n        { x: 29, y: 96, z: 113 },\n      ]);\n      moveNpc(path, \"fraction\", fractionMessage);\n      break;\n    }\n    case \"ratio\": {\n      let path = await generatePath([\n        { x: 57, y: 96, z: 148 },\n        { x: -3, y: 96, z: 148 },\n        { x: -3, y: 96, z: 141 },\n        { x: -3, y: 96, z: 142 },\n      ]);\n      moveNpc(path, \"ratio\", ratioMessage);\n      break;\n    }\n  }\n}\n\nasync function moveNpc(\n  path: { x: number; y: number; z: number }[],\n  type: string,\n  messages: { message: string; step: number }[]\n) {\n  let message = \"\";\n  overworld.runCommandAsync(`dialogue change @e[tag=${type}Npc] ${type}Npc1`); // in motion dialogue\n  for (let i = 0; i < path.length - 1; i++) {\n    let { x, y, z } = path[i];\n    const nextPoint = path[i + 1];\n    const facingX = nextPoint.x;\n    const facingY = nextPoint.y;\n    const facingZ = nextPoint.z;\n    system.runTimeout(async () => {\n      await overworld.runCommandAsync(`tp @e[tag=${type}Npc] ${x} ${y} ${z} facing ${facingX} ${facingY} ${facingZ}`);\n      const messageMatch = messages.find((msg) => msg.step === i);\n      if (messageMatch) {\n        message = messageMatch.message;\n      }\n      if (message) {\n        overworld.runCommandAsync(`title @p actionbar ${message}`);\n      }\n      if (path.length - 2 == i) {\n        // final point.\n        await overworld.runCommandAsync(`dialogue open @e[tag=${type}Npc] @p ${type}Npc2`); // end of walk dialogue\n      }\n    }, i * 5);\n  }\n}\n\nasync function generatePath(\n  path: { x: number; y: number; z: number }[]\n): Promise<{ x: number; y: number; z: number }[]> {\n  const generatedPath: { x: number; y: number; z: number }[] = [];\n\n  for (let i = 0; i < path.length - 1; i++) {\n    const startCoord = path[i];\n    const endCoord = path[i + 1];\n\n    const xDiff = endCoord.x - startCoord.x;\n    const yDiff = endCoord.y - startCoord.y;\n    const zDiff = endCoord.z - startCoord.z;\n\n    const xStep = Math.sign(xDiff);\n    const yStep = Math.sign(yDiff);\n    const zStep = Math.sign(zDiff);\n\n    const steps = Math.max(Math.abs(xDiff), Math.abs(yDiff), Math.abs(zDiff));\n\n    for (let j = 0; j <= steps; j++) {\n      const x = startCoord.x + xStep * j;\n      const y = startCoord.y + yStep * j;\n      const z = startCoord.z + zStep * j;\n\n      generatedPath.push({ x, y, z });\n    }\n  }\n\n  return generatedPath;\n}\n","import { system, world } from \"@minecraft/server\";\nimport { resetCuisenaireGame } from \"./cuisenaireRods\";\nimport { resetPotionGame } from \"./potionGame\";\nimport { resetWindowGame } from \"./stainedGlassWindow\";\nimport { closeGate } from \"./gate\";\n\nlet overworld = world.getDimension(\"overworld\");\n\nexport async function resetGame() {\n  //Reset the game areas\n  await overworld.runCommandAsync(`tp @p 30 96 106`);\n  await resetCuisenaireGame();\n  await overworld.runCommandAsync(`tp @p -10 97 143`);\n  await resetPotionGame();\n  await overworld.runCommandAsync(`tp @p 71 96 221`);\n  await resetWindowGame();\n  //Reset the NPCs\n  await overworld.runCommandAsync(`tp @e[tag=fractionNpc] 57 88 148`);\n  await overworld.runCommandAsync(`tp @e[tag=scaleNpc] 57 88 148`);\n  await overworld.runCommandAsync(`tp @e[tag=ratioNpc] 57 88 148`);\n  await overworld.runCommandAsync(`tp @e[tag=spawnNpc] 63 97 146 facing 69 97 147`);\n  await overworld.runCommandAsync(`dialogue change @e[tag=spawnNpc] spawnNpc`);\n  await overworld.runCommandAsync(`dialogue change @e[tag=scaleNpc] scaleNpc0`);\n  await overworld.runCommandAsync(`dialogue change @e[tag=ratioNpc] ratioNpc0`);\n  await overworld.runCommandAsync(`dialogue change @e[tag=fractionNpc] fractionNpc0`);\n  //Close the gates\n  await closeGate(\"spawn\");\n  await closeGate(\"scale\");\n  await closeGate(\"ratio\");\n  await closeGate(\"fraction\");\n  //Clean up the player\n  await overworld.runCommandAsync(`gamemode adventure @p`);\n  //await overworld.runCommandAsync(`gamerule showcoordinates false`);\n  await overworld.runCommandAsync(`scoreboard objectives setdisplay sidebar`);\n  await overworld.runCommandAsync(`scoreboard players set Coins Depth 0`);\n  await overworld.runCommandAsync(`clear @p`);\n  await overworld.runCommandAsync(`effect @p clear`);\n  await overworld.runCommandAsync(`tp @p 69 97 147 facing 41 97 147`);\n}\n"],"mappings":"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","names":["world","system","BlockPermutation","world","BlockPermutation","world","overworld","world","BlockPermutation","BlockPermutation","world","overworld","overworld","world","BlockPermutation","world","overworld","world","BlockPermutation","index","BlockPermutation","system","world","overworld","world","BlockPermutation","potion","seconds","potionStart","system","system","world","world","overworld","world","system","overworld","moveNpc","world","overworld","world","overworld","world","system","overworld","world","BlockPermutation","potion","seconds","system"],"file":"../scripts/main.js"}