{"version":3,"sources":["../../scripts/main.ts"],"sourcesContent":["import { BlockPermutation, Vector3, world } from \"@minecraft/server\";\n\nconst overworld = world.getDimension(\"overworld\");\n\n\n//gets the block and permutation of a block at a specific location\nfunction getBlockValue(location: Vector3) {\n  const block = overworld.getBlock(location); //get the block at the location\n  const permutation = block?.permutation; //get the permutation of the block\n  return {block, permutation};\n}\n//converts a block to a number value\nfunction getNumberValue(location: Vector3) {\n  let {block, permutation} = getBlockValue(location);\n  for (let i = 0; i < 10; i++) {//check for element_0 to element_9\n      if (permutation?.matches(\"element_\" + i)) {\n        return i;\n      }\n    }\n    block?.setPermutation(BlockPermutation.resolve(\"element_0\")); //if no match is found, default to element_0\n    return 0; //if no match is found, return 0\n  }\n  \n//calculates the total based on the block in the center\nfunction calculateTotal(leftvalue: number, rightvalue: number){\n  let {block, permutation} = getBlockValue({x: -11, y: -59, z: 93});\n  if (permutation?.matches(\"cut_copper\")) {\n    let total = leftvalue + rightvalue;\n    return total;\n  }\n  else if (permutation?.matches(\"raw_gold_block\")) {\n    let total = leftvalue - rightvalue;\n    return total;\n  }\n  else if (permutation?.matches(\"gold_block\")) {\n    let total = leftvalue * rightvalue;\n    return total;\n  }\n  else if (permutation?.matches(\"cobblestone\")) {\n    let total = leftvalue / rightvalue;\n    return total;\n  }\n  else {\n    world.sendMessage(\"Add a +, -, *, or / block to the center to perform an operation.\");\n  }\n}\n\n//outputs the total to the screen\nfunction outputTotal(total: number, location: Vector3){\n  let blockName = \"\";\n  let totalString = ('' + total).split('').reverse().join(''); //reverses the string so it can be read from right to left\n  for (let i = 0; i < totalString.length; i++){\n    let {block, permutation} = getBlockValue(location);\n    if (totalString[i] === '.') {\n      blockName = \"anvil\";\n    } else {\n      let digit = parseInt(totalString[i]);\n      blockName = \"element_\" + digit;\n    }\n    block?.setPermutation(BlockPermutation.resolve(blockName));\n    location.x -= 1;\n  }\n}\n\nfunction roundToDigits(num: number, digits: number) {\n  let numStr = num.toString();\n  if (numStr.length > digits) {\n      if (numStr.includes('.')) {\n          let [whole, decimal] = numStr.split('.');\n          if (whole.length >= digits) {\n              return parseFloat(whole.slice(0, digits));\n          } else {\n              let decimalDigits = digits - whole.length;\n              return parseFloat(num.toFixed(decimalDigits));\n          }\n      } else {\n          return parseFloat(numStr.slice(0, digits));\n      }\n  } else {\n      return num;\n  }\n}\n\nasync function clearAnswer() {\n  overworld.runCommandAsync(\"fill -14 -57 93 -8 -57 93 air replace\");\n}\n\n//combines 3 digits into a single number\nfunction getInput(digit0: Vector3, digit1: Vector3, digit2: Vector3): number {\n  let digit0Value = getNumberValue(digit0);\n  let digit1Value = getNumberValue(digit1);\n  let digit2Value = getNumberValue(digit2);\n  let combinedString = '' + digit0Value + digit1Value + digit2Value;\n  let combinedNumber = parseInt(combinedString);\n  return combinedNumber;\n}\n\nworld.afterEvents.buttonPush.subscribe(async(event) => {\n  await clearAnswer();\n  let leftInput = getInput({x: -14, y: -59, z: 93}, {x: -13, y: -59, z: 93}, {x: -12, y: -59, z: 93});\n  let rightInput = getInput({x: -10, y: -59, z: 93}, {x: -9, y: -59, z: 93}, {x: -8, y: -59, z: 93});\n  let total = calculateTotal(leftInput, rightInput);\n  if (total){\n    let roundedTotal = roundToDigits(total, 6);\n    outputTotal(roundedTotal, {x: -8, y: -57, z: 93});\n    if (roundedTotal === total){\n      world.sendMessage(`The total is ${total}.`);\n    }\n    else {\n      world.sendMessage(`The total is ${total} and has been rounded to ${roundedTotal}.`);\n    }\n    \n  }\n\n});"],"mappings":"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","names":[],"file":"../scripts/main.js"}